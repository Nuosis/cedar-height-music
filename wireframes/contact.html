<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact - Cedar Heights Music Academy</title>
  <meta name="description" content="Get in touch with Cedar Heights Music Academy. Questions about lessons? We're here to help with your musical journey.">
  
  <!-- Page Blueprints Design System -->
  <link rel="stylesheet" href="wireframe-styles.css">
  
  <!-- Accessibility -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
  
  <!-- Page Blueprints Global Navigation - Lines 27-30 -->
  <div id="navigation-placeholder">
    <!-- Navigation component will be loaded here -->
  </div>

  <main id="main-content">
    
    <!-- Page Blueprints Contact Hero Section - Lines 305-331 -->
    <section class="contact-hero-section section" data-wireframe-section="contact-hero" data-measurement-point="contact-hero-height">
      <div class="page-container">
        <div class="contact-hero-content" style="text-align: center; max-width: 800px; margin: 0 auto;">
          
          <!-- Page Blueprints Eyebrow Text - Line 310 -->
          <div class="hero-eyebrow" data-typography-container="contact-eyebrow">
            Get in touch
          </div>
          
          <!-- Page Blueprints Main Headline - Line 311 -->
          <h1 class="contact-hero-headline" data-typography-container="contact-hero-headline" data-measurement-point="contact-headline-size">
            We're here to help with your musical journey
          </h1>
          
          <!-- Page Blueprints Subcopy - Line 312 -->
          <p class="contact-hero-subcopy" data-typography-container="contact-hero-subcopy" data-measurement-point="contact-subcopy-spacing">
            Questions about lessons? Want to discuss your child's musical goals? We'd love to hear from you and help you get started.
          </p>
        </div>
        
        <!-- Page Blueprints Background Composition - Lines 314-321 -->
        <div class="contact-hero-background" data-wireframe-section="contact-hero-background">
          <!-- Page Blueprints Base: Warm off-white/cream background consistent with brand palette -->
          <div class="hero-background-base" data-asset-container="contact-background"></div>
          
          <!-- Page Blueprints Optional subtle musical accent elements -->
          <div class="contact-decorative" data-wireframe-section="contact-decorative">
            <div class="musical-accent accent-1" data-asset-container="music-note-1">‚ô™</div>
            <div class="musical-accent accent-2" data-asset-container="music-note-2">‚ô´</div>
            <div class="character-illustration" data-asset-container="contact-character">üéµ</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Page Blueprints Contact Form Section - Lines 333-336 -->
    <section class="contact-form-section section" data-wireframe-section="contact-form" data-measurement-point="contact-form-height">
      <div class="page-container">
        <div class="contact-form-container" style="max-width: 800px; margin: 0 auto;">
          
          <div class="contact-layout" data-measurement-point="contact-layout">
            
            <!-- Page Blueprints Contact Form - Lines 334-336 -->
            <div class="contact-form-wrapper" data-wireframe-section="contact-form-wrapper">
              <h2 class="form-title" data-typography-container="form-title">Send us a message</h2>
              <p class="form-description" data-typography-container="form-description">
                Fill out the form below and we'll get back to you within 24 hours.
              </p>
              
              <!-- Page Blueprints Fields: Name, Email, Phone (optional), Message, consent checkbox - Line 334 -->
              <form class="contact-form" id="contact-form" data-measurement-point="contact-form-width">
                
                <!-- Page Blueprints Honeypot for spam - Line 335 -->
                <div class="honeypot" style="display: none;">
                  <input type="text" name="website" tabindex="-1" autocomplete="off">
                </div>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="contact-name" class="form-label" data-typography-container="form-label">Name *</label>
                    <input type="text" id="contact-name" name="name" class="form-input" required data-measurement-point="form-input">
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="contact-email" class="form-label" data-typography-container="form-label">Email *</label>
                    <input type="email" id="contact-email" name="email" class="form-input" required data-measurement-point="form-input">
                  </div>
                </div>
                
                <!-- Page Blueprints Phone (optional) - Line 334 -->
                <div class="form-row">
                  <div class="form-group">
                    <label for="contact-phone" class="form-label" data-typography-container="form-label">Phone</label>
                    <input type="tel" id="contact-phone" name="phone" class="form-input" data-measurement-point="form-input">
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="contact-message" class="form-label" data-typography-container="form-label">Message *</label>
                    <textarea id="contact-message" name="message" class="form-textarea" rows="5" required data-measurement-point="form-textarea"></textarea>
                  </div>
                </div>
                
                <!-- Page Blueprints Consent checkbox - Line 334 -->
                <div class="form-row">
                  <div class="form-group checkbox-group">
                    <label class="checkbox-label" data-typography-container="checkbox-label">
                      <input type="checkbox" id="contact-consent" name="consent" required class="form-checkbox">
                      <span class="checkbox-text">I agree to be contacted by Cedar Heights Music Academy regarding my inquiry. *</span>
                    </label>
                  </div>
                </div>
                
                <div class="form-row">
                  <button type="submit" class="primary-cta form-submit" data-measurement-point="form-submit-button">
                    <span data-typography-container="submit-button-text">Send Message</span>
                  </button>
                </div>
                
                <!-- Page Blueprints Clear success/failure states - Line 336 -->
                <div class="form-status" data-wireframe-section="form-status">
                  <div class="success-message" id="success-message" style="display: none;" data-typography-container="success-message">
                    <p>‚úÖ Thank you! Your message has been sent successfully. We'll get back to you within 24 hours.</p>
                  </div>
                  <div class="error-message" id="error-message" style="display: none;" data-typography-container="error-message">
                    <p>‚ùå Sorry, there was an error sending your message. Please try again or contact us directly.</p>
                  </div>
                </div>
              </form>
            </div>
            
            <!-- Page Blueprints Direct Info Section - Lines 338-340 -->
            <div class="contact-info-wrapper" data-wireframe-section="contact-info" data-measurement-point="contact-info-width">
              <h3 class="info-title" data-typography-container="info-title">Get in touch directly</h3>
              
              <div class="contact-methods" data-wireframe-section="contact-methods">
                
                <!-- Page Blueprints Email link - Line 339 -->
                <div class="contact-method" data-measurement-point="contact-method">
                  <div class="method-icon" data-asset-container="email-icon">üìß</div>
                  <div class="method-details">
                    <div class="method-label" data-typography-container="method-label">Email</div>
                    <a href="mailto:hello@cedarheightsmusic.com" class="method-link" data-typography-container="method-link">
                      hello@cedarheightsmusic.com
                    </a>
                  </div>
                </div>
                
                <!-- Page Blueprints Phone - Line 339 -->
                <div class="contact-method" data-measurement-point="contact-method">
                  <div class="method-icon" data-asset-container="phone-icon">üìû</div>
                  <div class="method-details">
                    <div class="method-label" data-typography-container="method-label">Phone</div>
                    <a href="tel:+1-250-555-0123" class="method-link" data-typography-container="method-link">
                      (250) 555-0123
                    </a>
                  </div>
                </div>
                
                <!-- Page Blueprints Hours or "by appointment" - Line 339 -->
                <div class="contact-method" data-measurement-point="contact-method">
                  <div class="method-icon" data-asset-container="hours-icon">üïê</div>
                  <div class="method-details">
                    <div class="method-label" data-typography-container="method-label">Hours</div>
                    <div class="method-text" data-typography-container="method-text">
                      By appointment<br>
                      Monday - Saturday
                    </div>
                  </div>
                </div>
                
                <!-- Page Blueprints Optional map or service area note - Line 340 -->
                <div class="contact-method" data-measurement-point="contact-method">
                  <div class="method-icon" data-asset-container="location-icon">üìç</div>
                  <div class="method-details">
                    <div class="method-label" data-typography-container="method-label">Service Area</div>
                    <div class="method-text" data-typography-container="method-text">
                      Cedar Heights, Nanaimo<br>
                      British Columbia
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="contact-cta" data-measurement-point="contact-cta-spacing">
                <p class="cta-text" data-typography-container="contact-cta-text">
                  Ready to start your musical journey?
                </p>
                <button onclick="openEnrollModal()" class="primary-cta" data-measurement-point="contact-enroll-cta">
                  Enroll Now
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer Component -->
  <div id="footer-placeholder">
    <!-- Footer component will be loaded here -->
  </div>

  <!-- Enroll Modal Component -->
  <div id="enroll-modal-placeholder">
    <!-- Modal component will be loaded here -->
  </div>

  <!-- Enroll Modal Component (Fallback) -->
  <div class="enroll-modal-overlay" id="enroll-modal" style="display: none;">
    <div class="enroll-modal-container">
      <div class="enroll-modal-header">
        <button class="modal-close" aria-label="Close enrollment modal">
          <span class="close-icon">√ó</span>
        </button>
        <h2 class="modal-title">Start Your Musical Journey</h2>
        <p class="modal-subtitle">Contact us to begin your enrollment</p>
      </div>
      <div class="enroll-modal-content">
        <div class="modal-step active">
          <h3 class="step-title">Ready to Get Started?</h3>
          <p class="step-description">Contact us today to schedule your first lesson and begin your musical journey.</p>
          <div style="text-align: center; margin-top: 2rem;">
            <a href="contact.html" class="primary-cta" style="text-decoration: none;">
              Contact Us
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Page-specific styles -->
  <style>
    /* Contact Hero Section - Page Blueprints Lines 305-331 */
    .contact-hero-section {
      position: relative;
      padding: calc(var(--section-spacing-desktop) * 1.5) 0 var(--section-spacing-desktop) 0;
      background: var(--color-warm-off-white); /* Page Blueprints Line 315: consistent with brand palette */
      overflow: hidden;
    }
    
    .contact-hero-content {
      position: relative;
      z-index: 2;
    }
    
    /* Page Blueprints Eyebrow Text - Line 310 */
    .hero-eyebrow {
      font-size: 1rem; /* Page Blueprints Line 313: Eyebrow ~16px */
      color: var(--color-primary-green);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 1rem;
    }
    
    /* Page Blueprints Main Headline - Line 311 */
    .contact-hero-headline {
      font-size: 3.5rem; /* Page Blueprints Line 313: headline ~48-56px desktop */
      font-weight: 700;
      line-height: 1.15;
      color: var(--color-dark-text);
      margin-bottom: 1.5rem;
    }
    
    /* Page Blueprints Subcopy - Line 312 */
    .contact-hero-subcopy {
      font-size: 1.125rem; /* Page Blueprints Line 313: subcopy ~18px */
      line-height: 1.6;
      color: rgba(0, 5, 16, 0.8);
      margin-bottom: 0;
    }
    
    /* Page Blueprints Background Elements - Lines 314-321 */
    .contact-hero-background {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 1;
    }
    
    .hero-background-base {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(252, 244, 226, 0.5) 0%, rgba(255, 250, 205, 0.3) 100%);
    }
    
    /* Page Blueprints Minimal decorative accents - Line 320 */
    .contact-decorative {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
    }
    
    .musical-accent {
      position: absolute;
      font-size: 1.5rem;
      color: var(--color-warm-yellow);
      opacity: 0.2;
    }
    
    .accent-1 {
      top: 25%;
      left: 15%;
      transform: rotate(-15deg);
    }
    
    .accent-2 {
      bottom: 30%;
      right: 20%;
      transform: rotate(20deg);
    }
    
    .character-illustration {
      position: absolute;
      top: 50%;
      right: 10%;
      transform: translateY(-50%);
      font-size: 4rem;
      opacity: 0.1;
    }
    
    /* Contact Form Section - Page Blueprints Lines 333-336 */
    .contact-form-section {
      padding: var(--section-spacing-desktop) 0;
      background: white;
    }
    
    .contact-layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4rem;
      align-items: start;
    }
    
    .contact-form-wrapper {
      background: rgba(153, 227, 158, 0.03);
      padding: 2.5rem;
      border-radius: var(--border-radius-medium);
      border: 1px solid rgba(153, 227, 158, 0.1);
    }
    
    .form-title {
      font-size: 1.75rem;
      font-weight: 600;
      color: var(--color-dark-text);
      margin-bottom: 0.75rem;
    }
    
    .form-description {
      font-size: 1rem;
      color: rgba(0, 5, 16, 0.7);
      margin-bottom: 2rem;
      line-height: 1.5;
    }
    
    .contact-form {
      position: relative;
    }
    
    .form-row {
      margin-bottom: 1.5rem;
    }
    
    .form-row:last-of-type {
      margin-bottom: 0;
    }
    
    .checkbox-group {
      margin-bottom: 2rem;
    }
    
    .checkbox-label {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      cursor: pointer;
      line-height: 1.5;
    }
    
    .form-checkbox {
      margin-top: 0.125rem;
      flex-shrink: 0;
    }
    
    .checkbox-text {
      font-size: 0.875rem;
      color: rgba(0, 5, 16, 0.8);
    }
    
    .form-submit {
      width: 100%;
      justify-content: center;
      padding: 1rem 2rem;
      font-size: 1.125rem;
    }
    
    /* Page Blueprints Success/failure states - Line 336 */
    .form-status {
      margin-top: 1.5rem;
    }
    
    .success-message {
      background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
      color: #155724;
      padding: 1rem 1.5rem;
      border-radius: var(--border-radius-medium);
      border: 1px solid #c3e6cb;
    }
    
    .success-message p {
      margin: 0;
      font-weight: 500;
    }
    
    .error-message {
      background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
      color: #721c24;
      padding: 1rem 1.5rem;
      border-radius: var(--border-radius-medium);
      border: 1px solid #f5c6cb;
    }
    
    .error-message p {
      margin: 0;
      font-weight: 500;
    }
    
    /* Contact Info Section - Page Blueprints Lines 338-340 */
    .contact-info-wrapper {
      padding: 2.5rem 2rem;
    }
    
    .info-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--color-dark-text);
      margin-bottom: 2rem;
    }
    
    .contact-methods {
      margin-bottom: 3rem;
    }
    
    .contact-method {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      margin-bottom: 2rem;
      padding-bottom: 2rem;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .contact-method:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    
    .method-icon {
      font-size: 1.5rem;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(153, 227, 158, 0.1);
      border-radius: 50%;
      flex-shrink: 0;
    }
    
    .method-details {
      flex: 1;
    }
    
    .method-label {
      font-weight: 600;
      color: var(--color-dark-text);
      margin-bottom: 0.25rem;
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .method-link {
      color: var(--color-primary-green);
      text-decoration: none;
      font-weight: 500;
      transition: var(--transition-normal);
    }
    
    .method-link:hover {
      text-decoration: underline;
    }
    
    .method-text {
      color: rgba(0, 5, 16, 0.8);
      line-height: 1.4;
    }
    
    .contact-cta {
      text-align: center;
      padding: 2rem;
      background: rgba(153, 227, 158, 0.05);
      border-radius: var(--border-radius-medium);
    }
    
    .cta-text {
      font-size: 1.125rem;
      font-weight: 500;
      color: var(--color-dark-text);
      margin-bottom: 1.5rem;
    }
    
    /* Page Blueprints Honeypot spam protection - Line 335 */
    .honeypot {
      position: absolute;
      left: -9999px;
      width: 1px;
      height: 1px;
      overflow: hidden;
    }
    
    /* Responsive Adjustments - Page Blueprints responsive guidelines */
    @media (max-width: 1199px) {
      .contact-hero-headline {
        font-size: 3rem;
      }
      
      .contact-layout {
        gap: 3rem;
      }
    }
    
    @media (max-width: 767px) {
      .contact-hero-headline {
        font-size: 2.25rem;
      }
      
      .contact-hero-subcopy {
        font-size: 1rem;
      }
      
      .contact-layout {
        grid-template-columns: 1fr;
        gap: 2rem;
      }
      
      .contact-form-wrapper,
      .contact-info-wrapper {
        padding: 2rem 1.5rem;
      }
      
      .contact-method {
        margin-bottom: 1.5rem;
        padding-bottom: 1.5rem;
      }
    }
    
    /* Focus and Accessibility */
    .form-input:focus,
    .form-textarea:focus,
    .form-checkbox:focus {
      outline: 2px solid var(--color-primary-green);
      outline-offset: 2px;
    }
    
    .checkbox-label:focus-within {
      outline: 2px solid var(--color-primary-green);
      outline-offset: 2px;
      border-radius: 4px;
    }
    
    /* Form validation states */
    .form-input:invalid,
    .form-textarea:invalid {
      border-color: #dc3545;
    }
    
    .form-input:valid,
    .form-textarea:valid {
      border-color: var(--color-primary-green);
    }
    
    /* Loading state for form submission */
    .form-submit.loading {
      opacity: 0.7;
      pointer-events: none;
    }
    
    .form-submit.loading::after {
      content: '';
      display: inline-block;
      width: 16px;
      height: 16px;
      margin-left: 8px;
      border: 2px solid transparent;
      border-top: 2px solid currentColor;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>

  <!-- Page-specific JavaScript -->
  <script>
    // Enhanced Component Loading System with file:// protocol support
    async function loadComponents() {
      try {
        await Promise.all([
          loadComponent('navigation', 'navigation-placeholder'),
          loadComponent('footer', 'footer-placeholder'),
          loadComponent('enroll-modal', 'enroll-modal-placeholder')
        ]);
        
        // Initialize components after loading
        initializeComponents();
      } catch (error) {
        console.error('Failed to load components:', error);
        // Fallback to inline components
        loadFallbackComponents();
      }
    }

    async function loadComponent(componentName, placeholderId) {
      const placeholder = document.getElementById(placeholderId);
      if (!placeholder) {
        console.warn(`Placeholder ${placeholderId} not found`);
        return;
      }

      try {
        // Try to load component via fetch first
        const response = await fetch(`components/${componentName}.html`);
        if (response.ok) {
          const html = await response.text();
          placeholder.innerHTML = html;
          return;
        }
      } catch (error) {
        // Fetch failed, likely file:// protocol
      }

      // Fallback: Load component content directly
      loadComponentFallback(componentName, placeholder);
    }

    function loadComponentFallback(componentName, placeholder) {
      switch (componentName) {
        case 'navigation':
          loadNavigationFallback(placeholder);
          break;
        case 'footer':
          loadFooterFallback(placeholder);
          break;
        case 'enroll-modal':
          loadEnrollModalFallback(placeholder);
          break;
      }
    }

    function loadNavigationFallback(placeholder) {
      placeholder.innerHTML = `
        <header class="global-header">
          <nav class="main-navigation" role="navigation" aria-label="Main navigation">
            <div class="page-container">
              <div class="nav-container">
                <div class="nav-brand">
                  <a href="index.html" class="brand-link" aria-label="Cedar Heights Music Academy - Home">
                    <span class="wordmark">Cedar Heights Music Academy</span>
                  </a>
                </div>
                <div class="nav-menu">
                  <ul class="nav-list" role="menubar">
                    <li class="nav-item" role="none">
                      <a href="index.html" class="nav-link" role="menuitem">
                        <span>Home</span>
                      </a>
                    </li>
                    <li class="nav-item" role="none">
                      <a href="about.html" class="nav-link" role="menuitem">
                        <span>About</span>
                      </a>
                    </li>
                    <li class="nav-item" role="none">
                      <a href="pricing.html" class="nav-link" role="menuitem">
                        <span>Pricing</span>
                      </a>
                    </li>
                    <li class="nav-item" role="none">
                      <button onclick="openEnrollModal()" class="nav-link enroll-button" role="menuitem">
                        <span>Enroll</span>
                      </button>
                    </li>
                    <li class="nav-item" role="none">
                      <a href="contact.html" class="nav-link active" role="menuitem">
                        <span>Contact</span>
                      </a>
                    </li>
                  </ul>
                </div>
                <button class="mobile-menu-toggle" aria-label="Toggle mobile menu" aria-expanded="false" aria-controls="mobile-menu">
                  <span class="hamburger-line"></span>
                  <span class="hamburger-line"></span>
                  <span class="hamburger-line"></span>
                </button>
              </div>
            </div>
            <div class="mobile-menu" id="mobile-menu">
              <div class="mobile-menu-content">
                <ul class="mobile-nav-list" role="menu">
                  <li class="mobile-nav-item" role="none">
                    <a href="index.html" class="mobile-nav-link" role="menuitem">
                      <span>Home</span>
                    </a>
                  </li>
                  <li class="mobile-nav-item" role="none">
                    <a href="about.html" class="mobile-nav-link" role="menuitem">
                      <span>About</span>
                    </a>
                  </li>
                  <li class="mobile-nav-item" role="none">
                    <a href="pricing.html" class="mobile-nav-link" role="menuitem">
                      <span>Pricing</span>
                    </a>
                  </li>
                  <li class="mobile-nav-item" role="none">
                    <button onclick="openEnrollModal()" class="mobile-nav-link enroll-button" role="menuitem">
                      <span>Enroll</span>
                    </button>
                  </li>
                  <li class="mobile-nav-item" role="none">
                    <a href="contact.html" class="mobile-nav-link active" role="menuitem">
                      <span>Contact</span>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
        </header>
      `;
    }

    function loadFooterFallback(placeholder) {
      placeholder.innerHTML = `
        <footer class="global-footer">
          <div class="page-container">
            <div class="footer-content">
              <div class="footer-column footer-brand">
                <div class="footer-logo">
                  <span class="footer-wordmark">Cedar Heights Music Academy</span>
                </div>
                <p class="footer-description">
                  Personal, one-on-one music lessons in Cedar & Nanaimo. Nurturing young musicians in a supportive environment.
                </p>
              </div>
              <div class="footer-column footer-links">
                <h3 class="footer-heading">Quick Links</h3>
                <ul class="footer-nav-list">
                  <li class="footer-nav-item">
                    <a href="about.html" class="footer-nav-link">About</a>
                  </li>
                  <li class="footer-nav-item">
                    <a href="pricing.html" class="footer-nav-link">Pricing</a>
                  </li>
                  <li class="footer-nav-item">
                    <button onclick="openEnrollModal()" class="footer-nav-link" style="background: none; border: none; cursor: pointer; font-family: inherit; font-size: inherit;">Enroll</button>
                  </li>
                  <li class="footer-nav-item">
                    <a href="contact.html" class="footer-nav-link">Contact</a>
                  </li>
                </ul>
              </div>
              <div class="footer-column footer-legal">
                <h3 class="footer-heading">Legal</h3>
                <ul class="footer-nav-list">
                  <li class="footer-nav-item">
                    <a href="privacy.html" class="footer-nav-link">Privacy Policy</a>
                  </li>
                  <li class="footer-nav-item">
                    <a href="terms.html" class="footer-nav-link">Terms of Service</a>
                  </li>
                </ul>
              </div>
              <div class="footer-column footer-social">
                <h3 class="footer-heading">Connect</h3>
                <div class="social-links">
                  <a href="#" class="social-link" aria-label="Facebook">
                    <span class="social-text">Facebook</span>
                  </a>
                  <a href="#" class="social-link" aria-label="Instagram">
                    <span class="social-text">Instagram</span>
                  </a>
                  <a href="#" class="social-link" aria-label="Email">
                    <span class="social-text">Email</span>
                  </a>
                </div>
              </div>
            </div>
            <div class="footer-bottom">
              <p class="copyright">
                Cedar Heights Music Academy ¬© 2025. All rights reserved.
              </p>
            </div>
          </div>
        </footer>
      `;
    }

    function loadEnrollModalFallback(placeholder) {
      placeholder.innerHTML = '<div id="enroll-modal" style="display: none;"></div>';
    }

    function initializeComponents() {
      // Initialize mobile menu functionality
      initializeMobileMenu();
      
      // Initialize modal functionality
      initializeEnrollModal();
      
      // Set active navigation states
      setActiveNavigation();
    }

    function initializeMobileMenu() {
      const mobileToggle = document.querySelector('.mobile-menu-toggle');
      const mobileMenu = document.querySelector('.mobile-menu');
      
      if (mobileToggle && mobileMenu) {
        mobileToggle.addEventListener('click', function() {
          const isExpanded = mobileToggle.getAttribute('aria-expanded') === 'true';
          
          mobileToggle.setAttribute('aria-expanded', !isExpanded);
          mobileMenu.classList.toggle('active');
          
          document.body.style.overflow = !isExpanded ? 'hidden' : '';
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
          if (!mobileToggle.contains(event.target) && !mobileMenu.contains(event.target)) {
            mobileToggle.setAttribute('aria-expanded', 'false');
            mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
          }
        });
        
        // Close menu on escape key
        document.addEventListener('keydown', function(event) {
          if (event.key === 'Escape' && mobileMenu.classList.contains('active')) {
            mobileToggle.setAttribute('aria-expanded', 'false');
            mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
            mobileToggle.focus();
          }
        });
      }
    }

    function setActiveNavigation() {
      const currentPath = window.location.pathname;
      const currentPage = currentPath.split('/').pop() || 'contact.html';
      
      // Remove active class from all nav links
      const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');
      navLinks.forEach(link => {
        link.classList.remove('active');
        link.removeAttribute('aria-current');
      });
      
      // Add active class to current page links
      navLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href === currentPage || (currentPage === 'contact.html' && href === 'contact.html')) {
          link.classList.add('active');
          link.setAttribute('aria-current', 'page');
        }
      });
    }

    function loadFallbackComponents() {
      // If all else fails, ensure basic navigation exists
      const navPlaceholder = document.getElementById('navigation-placeholder');
      if (navPlaceholder && !navPlaceholder.innerHTML.trim()) {
        loadNavigationFallback(navPlaceholder);
      }
      
      const footerPlaceholder = document.getElementById('footer-placeholder');
      if (footerPlaceholder && !footerPlaceholder.innerHTML.trim()) {
        loadFooterFallback(footerPlaceholder);
      }
      
      initializeComponents();
    }

    // Global modal functions
    function openEnrollModal() {
      const modal = document.getElementById('enroll-modal');
      if (modal) {
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        
        // Focus first focusable element
        const firstFocusable = modal.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (firstFocusable) {
          firstFocusable.focus();
        }
      }
    }

    function closeEnrollModal() {
      const modal = document.getElementById('enroll-modal');
      if (modal) {
        modal.style.display = 'none';
        document.body.style.overflow = '';
      }
    }

    function initializeEnrollModal() {
      const modal = document.getElementById('enroll-modal');
      if (!modal) return;

      // Add event listeners
      const closeButton = modal.querySelector('.modal-close');
      if (closeButton) {
        closeButton.addEventListener('click', closeEnrollModal);
      }

      // Close on escape key
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && modal.style.display === 'flex') {
          closeEnrollModal();
        }
      });

      // Close on outside click
      modal.addEventListener('click', function(event) {
        if (event.target === modal) {
          closeEnrollModal();
        }
      });
    }

    document.addEventListener('DOMContentLoaded', function() {
      // Load all components first
      loadComponents();
      
      // Page Blueprints Client-side Formspree integration - Line 335
      const contactForm = document.getElementById('contact-form');
      const submitButton = contactForm.querySelector('.form-submit');
      const successMessage = document.getElementById('success-message');
      const errorMessage = document.getElementById('error-message');
      
      contactForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Reset status messages
        successMessage.style.display = 'none';
        errorMessage.style.display = 'none';
        
        // Show loading state
        submitButton.classList.add('loading');
        submitButton.disabled = true;
        
        // Get form data
        const formData = new FormData(contactForm);
        
        // Page Blueprints Honeypot check - Line 335
        if (formData.get('website')) {
          // Spam detected, fail silently
          setTimeout(() => {
            submitButton.classList.remove('loading');
            submitButton.disabled = false;
            errorMessage.style.display = 'block';
          }, 1000);
          return;
        }
        
        try {
          // Page Blueprints Formspree integration - Line 335
          const response = await fetch('https://formspree.io/f/YOUR_FORM_ID', {
            method: 'POST',
            body: formData,
            headers: {
              'Accept': 'application/json'
            }
          });
          
          if (response.ok) {
            // Page Blueprints Clear success state - Line 336
            successMessage.style.display = 'block';
            contactForm.reset();
            
            // Scroll to success message
            successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
          } else {
            throw new Error('Form submission failed');
          }
        } catch (error) {
          console.error('Form submission error:', error);
          // Page Blueprints Clear failure state - Line 336
          errorMessage.style.display = 'block';
          
          // Scroll to error message
          errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } finally {
          // Remove loading state
          submitButton.classList.remove('loading');
          submitButton.disabled = false;
        }
      });
      
      // Form validation enhancement
      const requiredFields = contactForm.querySelectorAll('[required]');
      requiredFields.forEach(field => {
        field.addEventListener('blur', function() {
          if (this.value.trim() === '') {
            this.classList.add('error');
          } else {
            this.classList.remove('error');
          }
        });
        
        field.addEventListener('input', function() {
          if (this.value.trim() !== '') {
            this.classList.remove('error');
          }
        });
      });
      
      // Phone number formatting
      const phoneField = document.getElementById('contact-phone');
      if (phoneField) {
        phoneField.addEventListener('input', function(e) {
          let value = e.target.value.replace(/\D/g, '');
          if (value.length >= 6) {
            value = value.replace(/(\d{3})(\d{3})(\d{4})/, '($1) $2-$3');
          } else if (value.length >= 3) {
            value = value.replace(/(\d{3})(\d{0,3})/, '($1) $2');
          }
          e.target.value = value;
        });
      }
    });
  </script>
</body>
</html>